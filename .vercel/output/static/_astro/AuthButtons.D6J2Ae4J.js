import{j as e}from"./jsx-runtime.TBa3i5EZ.js";import{r as a}from"./index.CVf8TyFT.js";import{c as u}from"./wrapper.DVMbrJAx.js";const v="https://ooevpxkcftpemofjantd.supabase.co",f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vZXZweGtjZnRwZW1vZmphbnRkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3Njg3ODYsImV4cCI6MjA4MTM0NDc4Nn0.rbUanSpOKtwqcSs71eCLw_K2ywpuWSfG9Ae88hBmu6M",c=u(v,f);function g(){const[r,s]=a.useState(null),[d,h]=a.useState(!0),[n,o]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const{data:{user:t}}=await c.auth.getUser();s(t)}catch(t){console.error("Auth check error:",t)}finally{h(!1)}})();const{data:{subscription:x}}=c.auth.onAuthStateChange((t,p)=>{s(p?.user??null)});return()=>x.unsubscribe()},[]);const m=async()=>{try{await c.auth.signOut(),s(null),o(!1),window.location.href="/"}catch(l){console.error("Logout error:",l)}};if(d)return e.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--bg-secondary)] animate-pulse"});if(!r)return e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"/login",className:"hidden sm:inline text-[var(--text-secondary)] hover:text-[var(--accent-primary)] transition-colors",children:"Connexion"}),e.jsx("a",{href:"/register",className:"hidden sm:inline px-4 py-2 bg-[var(--accent-primary)] text-white rounded-lg hover:opacity-90 transition-opacity text-sm font-medium",children:"S'inscrire"})]});const i=r.user_metadata?.username||r.email?.split("@")[0]||"User";return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>o(!n),className:"flex items-center gap-2 p-1 rounded-full hover:bg-[var(--bg-secondary)] transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--accent-primary)] flex items-center justify-center text-white font-semibold text-sm",children:i.charAt(0).toUpperCase()}),e.jsx("span",{className:"hidden sm:inline text-[var(--text-primary)] text-sm max-w-[100px] truncate",children:i}),e.jsx("svg",{className:`w-4 h-4 text-[var(--text-secondary)] transition-transform ${n?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 py-2 bg-[var(--bg-secondary)] border border-[var(--card-border)] rounded-xl shadow-xl z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-[var(--card-border)]",children:[e.jsx("p",{className:"text-[var(--text-primary)] font-medium truncate",children:i}),e.jsx("p",{className:"text-[var(--text-secondary)] text-sm truncate",children:r.email})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("a",{href:"/dashboard",className:"flex items-center gap-3 px-4 py-2 text-[var(--text-primary)] hover:bg-[var(--accent-primary)]/10 hover:text-[var(--accent-primary)] transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Dashboard"]}),e.jsxs("a",{href:"/profile",className:"flex items-center gap-3 px-4 py-2 text-[var(--text-primary)] hover:bg-[var(--accent-primary)]/10 hover:text-[var(--accent-primary)] transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Mon profil"]}),e.jsxs("a",{href:"/write",className:"flex items-center gap-3 px-4 py-2 text-[var(--text-primary)] hover:bg-[var(--accent-primary)]/10 hover:text-[var(--accent-primary)] transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Écrire"]})]}),e.jsx("div",{className:"border-t border-[var(--card-border)] pt-2",children:e.jsxs("button",{onClick:m,className:"flex items-center gap-3 w-full px-4 py-2 text-red-400 hover:bg-red-500/10 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Déconnexion"]})})]})]})]})}export{g as default};
