import{c as l}from"./wrapper.DVMbrJAx.js";import"./hoisted.BkoFJ0Lt.js";const m="https://ooevpxkcftpemofjantd.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vZXZweGtjZnRwZW1vZmphbnRkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3Njg3ODYsImV4cCI6MjA4MTM0NDc4Nn0.rbUanSpOKtwqcSs71eCLw_K2ywpuWSfG9Ae88hBmu6M",d=l(m,u),f=new URLSearchParams(window.location.search);f.get("registered")==="true"&&c("Inscription réussie ! Vérifiez votre email puis connectez-vous.");const s=document.getElementById("login-form"),r=s?.querySelector('button[type="submit"]');s?.addEventListener("submit",async n=>{n.preventDefault();const e=document.getElementById("email").value.trim(),t=document.getElementById("password").value;if(!e||!t){i("Veuillez remplir tous les champs");return}r&&(r.disabled=!0,r.textContent="Connexion en cours...");try{const{data:a,error:o}=await d.auth.signInWithPassword({email:e,password:t});if(o){console.error("Erreur Supabase:",o),o.message.includes("Invalid login credentials")?i("Email ou mot de passe incorrect"):o.message.includes("Email not confirmed")?i("Veuillez confirmer votre email avant de vous connecter"):i(o.message||"Erreur lors de la connexion");return}a.user&&(c("Connexion réussie ! Redirection..."),setTimeout(()=>{window.location.href="/dashboard"},1e3))}catch(a){console.error("Erreur:",a),i("Une erreur est survenue. Veuillez réessayer.")}finally{r&&(r.disabled=!1,r.textContent="Se connecter")}});function i(n){document.querySelectorAll(".alert-message").forEach(t=>t.remove());const e=document.createElement("div");e.className="alert-message p-4 mb-4 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-sm",e.textContent=n,s?.insertBefore(e,s.firstChild),setTimeout(()=>e.remove(),5e3)}function c(n){document.querySelectorAll(".alert-message").forEach(t=>t.remove());const e=document.createElement("div");e.className="alert-message p-4 mb-4 bg-green-500/20 border border-green-500/50 rounded-lg text-green-400 text-sm",e.textContent=n,s?.insertBefore(e,s.firstChild)}
