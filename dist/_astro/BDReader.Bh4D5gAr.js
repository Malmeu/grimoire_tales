import{j as e}from"./jsx-runtime.TBa3i5EZ.js";import{r as l}from"./index.CVf8TyFT.js";function V({pages:s,title:D,chapterTitle:M,onNextChapter:g,onPrevChapter:y,hasNextChapter:v=!1,hasPrevChapter:b=!1}){const[a,$]=l.useState(0),[u,w]=l.useState(!1),[n,E]=l.useState("single"),[o,L]=l.useState("ltr"),[x,j]=l.useState(!0),[f,z]=l.useState(!0),[p,k]=l.useState(100),[F,C]=l.useState(!0),[P,W]=l.useState(!1);l.useEffect(()=>{(async()=>{C(!0);const t=s.map(i=>new Promise(c=>{const N=new Image;N.onload=c,N.onerror=c,N.src=i}));await Promise.all(t),C(!1)})()},[s]);const h=l.useCallback(r=>{const t=n==="double"?Math.ceil(s.length/2)-1:s.length-1;r>=0&&r<=t&&$(r)},[s.length,n]),d=l.useCallback(()=>{const r=n==="double"?Math.ceil(s.length/2)-1:s.length-1;a<r?h(a+1):v&&g&&g()},[a,h,v,g,n,s.length]),m=l.useCallback(()=>{a>0?h(a-1):b&&y&&y()},[a,h,b,y]);l.useEffect(()=>{const r=t=>{const i=o==="rtl";t.key==="ArrowRight"||t.key===" "?(t.preventDefault(),i?m():d()):t.key==="ArrowLeft"?(t.preventDefault(),i?d():m()):t.key==="ArrowUp"?(t.preventDefault(),k(c=>Math.min(200,c+10))):t.key==="ArrowDown"?(t.preventDefault(),k(c=>Math.max(50,c-10))):t.key==="Escape"?u&&(document.exitFullscreen(),w(!1)):t.key==="f"?S():t.key==="h"&&j(c=>!c)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[d,m,o,u]),l.useEffect(()=>{let r;const t=()=>{j(!0),clearTimeout(r),r=setTimeout(()=>{u&&j(!1)},3e3)};return window.addEventListener("mousemove",t),()=>{window.removeEventListener("mousemove",t),clearTimeout(r)}},[u]);const S=async()=>{document.fullscreenElement?(await document.exitFullscreen(),w(!1)):(await document.documentElement.requestFullscreen(),w(!0))},B=()=>{if(n==="double"){const r=a*2,t=s[r],i=s[r+1];return o==="rtl"?[i,t].filter(Boolean):[t,i].filter(Boolean)}return[s[a]]},I=()=>{if(n==="double"){const r=a*2+1,t=Math.min(r+1,s.length);return r===t?`${r}`:`${r}-${t}`}return`${a+1}`},R=B();return e.jsxs("div",{className:`relative bg-[var(--bg-primary)] ${u?"fixed inset-0 z-50":"rounded-lg overflow-hidden"}`,children:[F&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[var(--bg-primary)] z-50",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[var(--accent-primary)] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-[var(--text-secondary)]",children:"Chargement des pages..."})]})}),e.jsxs("div",{className:`flex items-center justify-between p-3 bg-[var(--bg-secondary)]/90 backdrop-blur-sm border-b border-[var(--card-border)] transition-opacity duration-300 ${x?"opacity-100":"opacity-0 pointer-events-none"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"font-[var(--font-title)] text-lg text-[var(--accent-primary)] truncate max-w-[200px] md:max-w-none",children:D}),M&&e.jsxs("span",{className:"hidden md:inline text-[var(--text-secondary)] text-sm",children:["‚Ä¢ ",M]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("span",{className:"text-[var(--text-secondary)] text-sm",children:["Page ",I()," / ",s.length]}),e.jsx("button",{onClick:()=>W(!P),className:"p-2 text-[var(--text-secondary)] hover:text-[var(--accent-primary)] transition-colors",title:"Param√®tres",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("button",{onClick:S,className:"p-2 text-[var(--text-secondary)] hover:text-[var(--accent-primary)] transition-colors",title:"Plein √©cran (F)",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]}),P&&e.jsxs("div",{className:"absolute top-14 right-4 z-50 w-72 p-4 bg-[var(--bg-secondary)] border border-[var(--card-border)] rounded-lg shadow-xl",children:[e.jsx("h3",{className:"text-[var(--accent-primary)] font-semibold mb-4",children:"Param√®tres de lecture"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-[var(--text-secondary)] text-sm mb-2 block",children:"Mode de lecture"}),e.jsx("div",{className:"flex gap-2",children:[{mode:"single",label:"Simple",icon:"üìÑ"},{mode:"double",label:"Double",icon:"üìñ"},{mode:"vertical",label:"Vertical",icon:"üìú"}].map(({mode:r,label:t,icon:i})=>e.jsxs("button",{onClick:()=>{E(r),$(0)},className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${n===r?"bg-[var(--accent-primary)] text-white":"bg-[var(--bg-primary)] text-[var(--text-secondary)] hover:text-[var(--accent-primary)]"}`,children:[i," ",t]},r))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-[var(--text-secondary)] text-sm mb-2 block",children:"Direction de lecture"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>L("ltr"),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${o==="ltr"?"bg-[var(--accent-primary)] text-white":"bg-[var(--bg-primary)] text-[var(--text-secondary)] hover:text-[var(--accent-primary)]"}`,children:"‚Üí Gauche √† Droite"}),e.jsx("button",{onClick:()=>L("rtl"),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${o==="rtl"?"bg-[var(--accent-primary)] text-white":"bg-[var(--bg-primary)] text-[var(--text-secondary)] hover:text-[var(--accent-primary)]"}`,children:"‚Üê Droite √† Gauche"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-[var(--text-secondary)] text-sm mb-2 block",children:["Zoom: ",p,"%"]}),e.jsx("input",{type:"range",min:"50",max:"200",value:p,onChange:r=>k(Number(r.target.value)),className:"w-full accent-[var(--accent-primary)]"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[var(--text-secondary)] text-sm",children:"Miniatures"}),e.jsx("button",{onClick:()=>z(!f),className:`w-12 h-6 rounded-full transition-colors ${f?"bg-[var(--accent-primary)]":"bg-[var(--bg-primary)]"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${f?"translate-x-6":"translate-x-0.5"}`})})]})]}),n==="vertical"?e.jsx("div",{className:"overflow-y-auto max-h-[80vh] px-4 py-8 space-y-2",children:s.map((r,t)=>e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:r,alt:`Page ${t+1}`,className:"max-w-full object-contain",style:{maxWidth:`${p}%`}})},t))}):e.jsxs("div",{className:"relative flex items-center justify-center min-h-[60vh] md:min-h-[70vh] bg-black/20",children:[e.jsx("button",{onClick:o==="rtl"?d:m,disabled:o==="rtl"?a>=(n==="double"?Math.ceil(s.length/2)-1:s.length-1)&&!v:a===0&&!b,className:`absolute left-2 md:left-4 z-10 p-2 md:p-3 bg-[var(--bg-primary)]/80 rounded-full text-[var(--text-secondary)] hover:text-[var(--accent-primary)] disabled:opacity-30 disabled:cursor-not-allowed transition-all hover:scale-110 ${x?"opacity-100":"opacity-0"}`,children:e.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"flex gap-1 items-center justify-center transition-transform duration-300",style:{transform:`scale(${p/100})`},children:R.map((r,t)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r,alt:`Page ${n==="double"?a*2+t+1:a+1}`,className:"max-h-[65vh] md:max-h-[75vh] max-w-[45vw] md:max-w-[40vw] object-contain rounded shadow-2xl",onClick:()=>{const i=window.event?window.event.offsetX:0,c=window.event?.target?.width||0;i<c/2?o==="rtl"?d():m():o==="rtl"?m():d()}}),e.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black/60 rounded text-white text-xs",children:n==="double"?a*2+t+1:a+1})]},t))}),e.jsx("button",{onClick:o==="rtl"?m:d,disabled:o==="rtl"?a===0&&!b:a>=(n==="double"?Math.ceil(s.length/2)-1:s.length-1)&&!v,className:`absolute right-2 md:right-4 z-10 p-2 md:p-3 bg-[var(--bg-primary)]/80 rounded-full text-[var(--text-secondary)] hover:text-[var(--accent-primary)] disabled:opacity-30 disabled:cursor-not-allowed transition-all hover:scale-110 ${x?"opacity-100":"opacity-0"}`,children:e.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("div",{className:"absolute left-0 top-0 w-1/3 h-full cursor-pointer z-5",onClick:()=>o==="rtl"?d():m()}),e.jsx("div",{className:"absolute right-0 top-0 w-1/3 h-full cursor-pointer z-5",onClick:()=>o==="rtl"?m():d()})]}),f&&n!=="vertical"&&e.jsx("div",{className:`p-3 bg-[var(--bg-secondary)]/90 backdrop-blur-sm border-t border-[var(--card-border)] transition-opacity duration-300 ${x?"opacity-100":"opacity-0 pointer-events-none"}`,children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-thin",children:s.map((r,t)=>{const i=n==="double"?Math.floor(t/2)===a:t===a;return e.jsx("button",{onClick:()=>h(n==="double"?Math.floor(t/2):t),className:`flex-shrink-0 w-12 h-16 md:w-16 md:h-24 rounded overflow-hidden border-2 transition-all ${i?"border-[var(--accent-primary)] shadow-[0_0_10px_var(--glow-color)]":"border-transparent hover:border-[var(--accent-primary)]/50"}`,children:e.jsx("img",{src:r,alt:`Miniature page ${t+1}`,className:"w-full h-full object-cover"})},t)})})}),e.jsx("div",{className:"h-1 bg-[var(--bg-secondary)]",children:e.jsx("div",{className:"h-full bg-[var(--accent-primary)] transition-all duration-300",style:{width:`${((n==="double"?a*2:a)+1)/s.length*100}%`}})}),e.jsx("div",{className:`p-2 text-center text-xs text-[var(--text-secondary)]/60 transition-opacity duration-300 ${x?"opacity-100":"opacity-0"}`,children:"‚Üê ‚Üí Navigation ‚Ä¢ ‚Üë ‚Üì Zoom ‚Ä¢ F Plein √©cran ‚Ä¢ H Masquer contr√¥les ‚Ä¢ Clic sur l'image pour naviguer"})]})}export{V as default};
