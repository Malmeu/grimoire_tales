import{j as t}from"./jsx-runtime.TBa3i5EZ.js";import{r as i}from"./index.CVf8TyFT.js";function k({initialContent:c="",onSave:a,placeholder:u="Commencez √† √©crire votre histoire..."}){const[l,m]=i.useState(c),[r,b]=i.useState(!1),[g,p]=i.useState(!1),e=i.useCallback((o,d="")=>{const n=document.getElementById("editor-textarea");if(!n)return;const s=n.selectionStart,x=n.selectionEnd,h=l.substring(s,x),$=l.substring(0,s)+o+h+d+l.substring(x);m($),setTimeout(()=>{n.focus(),n.setSelectionRange(s+o.length,s+o.length+h.length)},0)},[l]),f=async()=>{if(a){p(!0);try{await a(l)}finally{p(!1)}}},v=[{icon:"B",action:()=>e("**","**"),title:"Gras"},{icon:"I",action:()=>e("*","*"),title:"Italique"},{icon:"H1",action:()=>e("# "),title:"Titre 1"},{icon:"H2",action:()=>e("## "),title:"Titre 2"},{icon:"H3",action:()=>e("### "),title:"Titre 3"},{icon:"‚ùù",action:()=>e("> "),title:"Citation"},{icon:"‚Ä¢",action:()=>e("- "),title:"Liste"},{icon:"1.",action:()=>e("1. "),title:"Liste num√©rot√©e"},{icon:"üîó",action:()=>e("[","](url)"),title:"Lien"},{icon:"üì∑",action:()=>e("![alt](",")"),title:"Image"},{icon:"`",action:()=>e("`","`"),title:"Code inline"},{icon:"```",action:()=>e("```\n","\n```"),title:"Bloc de code"},{icon:"‚Äî",action:()=>e(`
---
`),title:"S√©parateur"}];return t.jsxs("div",{className:"parchment-card rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gold-old/20 bg-dark-void/30",children:[t.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:v.map((o,d)=>t.jsx("button",{onClick:o.action,title:o.title,className:"px-3 py-1.5 text-sm text-parchment hover:text-gold-old hover:bg-gold-old/10 rounded transition-colors",children:o.icon},d))}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("button",{onClick:()=>b(!r),className:`px-4 py-1.5 text-sm rounded transition-colors ${r?"bg-gold-old/20 text-gold-old":"text-parchment hover:text-gold-old hover:bg-gold-old/10"}`,children:r?"√âditer":"Aper√ßu"})})]}),t.jsx("div",{className:"min-h-[400px]",children:r?t.jsx("div",{className:"p-6 markdown-content prose prose-invert max-w-none",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:j(l)}})}):t.jsx("textarea",{id:"editor-textarea",value:l,onChange:o=>m(o.target.value),placeholder:u,className:"w-full h-[400px] p-6 bg-transparent text-parchment-light placeholder-parchment/30 resize-none focus:outline-none font-mono text-sm leading-relaxed"})}),t.jsxs("div",{className:"flex items-center justify-between p-3 border-t border-gold-old/20 bg-dark-void/30",children:[t.jsxs("div",{className:"text-sm text-parchment/50",children:[l.length," caract√®res ‚Ä¢ ",l.split(/\s+/).filter(Boolean).length," mots"]}),a&&t.jsx("button",{onClick:f,disabled:g,className:"glow-button px-6 py-2 text-sm disabled:opacity-50",children:g?"Sauvegarde...":"Sauvegarder"})]})]})}function j(c){return`<p class="mb-4 leading-relaxed">${c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^### (.+)$/gm,'<h3 class="font-gothic text-xl text-gold-old mt-6 mb-3">$1</h3>').replace(/^## (.+)$/gm,'<h2 class="font-gothic text-2xl text-gold-old mt-8 mb-4">$1</h2>').replace(/^# (.+)$/gm,'<h1 class="font-gothic text-3xl text-gold-old mt-10 mb-5">$1</h1>').replace(/\*\*(.+?)\*\*/g,'<strong class="font-semibold text-parchment-light">$1</strong>').replace(/\*(.+?)\*/g,'<em class="italic">$1</em>').replace(/^> (.+)$/gm,'<blockquote class="border-l-3 border-gold-old pl-4 italic text-parchment/80 my-4">$1</blockquote>').replace(/^- (.+)$/gm,'<li class="ml-4">$1</li>').replace(/^(\d+)\. (.+)$/gm,'<li class="ml-4">$2</li>').replace(/`([^`]+)`/g,'<code class="bg-dark-purple/50 px-1.5 py-0.5 rounded text-gold-old font-mono text-sm">$1</code>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-gold-old hover:text-gold-bright underline">$1</a>').replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" class="max-w-full rounded-lg my-4" />').replace(/^---$/gm,'<hr class="border-gold-old/20 my-8" />').replace(/\n\n/g,'</p><p class="mb-4 leading-relaxed">').replace(/\n/g,"<br />")}</p>`}export{k as default};
