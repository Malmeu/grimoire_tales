import{c as l}from"./wrapper.DVMbrJAx.js";import"./hoisted.BkoFJ0Lt.js";const u="https://ooevpxkcftpemofjantd.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9vZXZweGtjZnRwZW1vZmphbnRkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3Njg3ODYsImV4cCI6MjA4MTM0NDc4Nn0.rbUanSpOKtwqcSs71eCLw_K2ywpuWSfG9Ae88hBmu6M",p=l(u,d),n=document.getElementById("register-form"),s=n?.querySelector('button[type="submit"]');n?.addEventListener("submit",async o=>{o.preventDefault();const e=document.getElementById("username").value.trim(),i=document.getElementById("email").value.trim(),a=document.getElementById("password").value,c=document.getElementById("confirm-password").value;if(a!==c){t("Les mots de passe ne correspondent pas");return}if(a.length<8){t("Le mot de passe doit contenir au moins 8 caractères");return}if(e.length<3){t("Le nom d'utilisateur doit contenir au moins 3 caractères");return}s&&(s.disabled=!0,s.textContent="Création en cours...");try{const{data:m,error:r}=await p.auth.signUp({email:i,password:a,options:{data:{username:e}}});if(r){console.error("Erreur Supabase:",r),r.message.includes("already registered")?t("Cet email est déjà utilisé"):r.message.includes("invalid email")?t("Email invalide"):r.message.includes("password")?t("Mot de passe trop faible"):t(r.message||"Erreur lors de l'inscription");return}m.user&&(f("Compte créé ! Vérifiez votre email pour confirmer votre inscription."),setTimeout(()=>{window.location.href="/login?registered=true"},2e3))}catch(m){console.error("Erreur:",m),t("Une erreur est survenue. Veuillez réessayer.")}finally{s&&(s.disabled=!1,s.textContent="Créer mon compte")}});function t(o){document.querySelectorAll(".alert-message").forEach(i=>i.remove());const e=document.createElement("div");e.className="alert-message p-4 mb-4 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-sm",e.textContent=o,n?.insertBefore(e,n.firstChild),setTimeout(()=>e.remove(),5e3)}function f(o){document.querySelectorAll(".alert-message").forEach(i=>i.remove());const e=document.createElement("div");e.className="alert-message p-4 mb-4 bg-green-500/20 border border-green-500/50 rounded-lg text-green-400 text-sm",e.textContent=o,n?.insertBefore(e,n.firstChild)}
