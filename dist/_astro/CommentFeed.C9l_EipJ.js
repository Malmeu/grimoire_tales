import{j as e}from"./jsx-runtime.TBa3i5EZ.js";import{r as a}from"./index.CVf8TyFT.js";function S({storyId:f,chapterId:p}){const[r,o]=a.useState([]),[n,l]=a.useState(""),[g,c]=a.useState(!0),[d,u]=a.useState(!1);a.useEffect(()=>{v()},[f,p]);const v=async()=>{c(!0),setTimeout(()=>{o([{id:"1",user:{username:"DarkReader42",avatar_url:void 0},content:"Incroyable chapitre ! La tension monte vraiment. J'ai hÃ¢te de voir la suite !",likes_count:24,created_at:new Date(Date.now()-36e5).toISOString()},{id:"2",user:{username:"FantasyLover",avatar_url:void 0},content:"L'ambiance dark fantasy est parfaitement rendue. Bravo Ã  l'auteur !",likes_count:18,created_at:new Date(Date.now()-72e5).toISOString()},{id:"3",user:{username:"MysticScribe",avatar_url:void 0},content:"Ce twist Ã  la fin... je ne m'y attendais pas du tout ! ðŸ”¥",likes_count:31,created_at:new Date(Date.now()-108e5).toISOString()}]),c(!1)},500)},j=async t=>{t.preventDefault(),n.trim()&&(u(!0),setTimeout(()=>{const s={id:Date.now().toString(),user:{username:"Vous"},content:n,likes_count:0,created_at:new Date().toISOString()};o([s,...r]),l(""),u(!1)},300))},w=t=>{o(r.map(s=>s.id===t?{...s,likes_count:s.likes_count+1}:s))},N=t=>{const s=new Date(t),i=new Date().getTime()-s.getTime(),m=Math.floor(i/6e4),h=Math.floor(i/36e5),x=Math.floor(i/864e5);return m<60?`il y a ${m}min`:h<24?`il y a ${h}h`:x<7?`il y a ${x}j`:s.toLocaleDateString("fr-FR")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"font-gothic text-2xl text-gold-old flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Commentaires (",r.length,")"]}),e.jsxs("form",{onSubmit:j,className:"parchment-card p-4 rounded-lg",children:[e.jsx("textarea",{value:n,onChange:t=>l(t.target.value),placeholder:"Partagez votre avis sur cette histoire...",className:"w-full p-3 bg-dark-void/50 border border-gold-old/20 rounded-lg text-parchment-light placeholder-parchment/40 resize-none focus:outline-none focus:border-gold-old/50 transition-colors",rows:3}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx("button",{type:"submit",disabled:d||!n.trim(),className:"glow-button px-6 py-2 text-sm disabled:opacity-50",children:d?"Envoi...":"Publier"})})]}),g?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"incantation-loader"})}):e.jsx("div",{className:"space-y-4",children:r.map(t=>e.jsx("div",{className:"parchment-card p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-dark-purple flex items-center justify-center text-gold-old font-gothic",children:t.user.avatar_url?e.jsx("img",{src:t.user.avatar_url,alt:t.user.username,className:"w-full h-full rounded-full object-cover"}):t.user.username.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-parchment-light",children:t.user.username}),e.jsx("span",{className:"text-xs text-parchment/50",children:N(t.created_at)})]}),e.jsx("p",{className:"text-parchment/80 text-sm leading-relaxed",children:t.content}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("button",{onClick:()=>w(t.id),className:"flex items-center gap-1 text-sm text-parchment/50 hover:text-gold-old transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),t.likes_count]}),e.jsx("button",{className:"text-sm text-parchment/50 hover:text-gold-old transition-colors",children:"RÃ©pondre"})]})]})]})},t.id))})]})}export{S as default};
